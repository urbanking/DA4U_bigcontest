# 서울시 골목상권 분석 자동화

## 프로젝트 설명

서울시 골목상권 분석 사이트(https://golmok.seoul.go.kr)에서 Playwright MCP를 사용하여 자동으로 상권분석 리포트를 생성하고 캡처하는 도구입니다.

## 실행 방법

### gemini1.bat 실행

배치 파일을 더블클릭하여 자동화된 상권분석을 수행합니다.

```batch
gemini1.bat  # 일반 실행 (브라우저 표시)
상권분석_실행_headless.bat  # 헤드리스 실행 (브라우저 미표시)
```

## 작동 과정

1. **브라우저 시작**: 새로운 브라우저 세션으로 Playwright MCP 실행
2. **사이트 접속**: https://golmok.seoul.go.kr/owner/owner.do
3. **주소 입력**: 서울특별시 성동구 왕십리로4가길 9
4. **다음 버튼 클릭**
5. **업종 선택**: 외식업 선택
6. **다음 버튼 클릭**
7. **분석영역 설정**:
   - 반경/다각형 클릭
   - 500M 선택
   - 적용 버튼 클릭
8. **분석 실행**: 분석하기 버튼 클릭
9. **결과 캡처**: 화면 오른편의 분석레포트 캡처 및 PNG로 저장
10. **PDF 출력**: 문의번호 옆옆에 있는 프린트 모양의 출력 버튼 클릭
11. **PDF 저장**: 출력 페이지에서 왼쪽 위 2번째에 있는 PDF 저장 버튼 클릭
12. **대기**: 40초 기다림 (PDF 생성 완료 대기)

헤드리스 모드: 미사용

## 출력 파일

분석이 완료되면 다음과 같은 형식으로 파일들이 저장됩니다:

### PNG 스크린샷

- **파일명 예시**: `서울특별시성동구왕십리로4가길9_상권분석레포트.png`
- **저장 위치**: 프로젝트 폴더 (`.playwright-mcp` 폴더)

### PDF 리포트

- **파일명**: 브라우저 다운로드 폴더에 자동 저장
- **저장 위치**: 프로젝트 폴더(.상권분석리포트 폴더)
- **대기 시간**: PDF 생성 완료까지 40초 소요

## 사용 예시

### Python 스크립트로 실행
```bash
python 상권분석_자동화.py "서울특별시 성동구 왕십리로4가길 9" 외식업 500M
```

### 다른 주소로 분석하기

gemini1.bat 파일을 편집하여 주소를 변경할 수 있습니다:

```batch
gemini --yolo -p "새로운 브라우저 세션으로 시작하고 play wrights mcp를 사용해서 @https://golmok.seoul.go.kr/owner/owner.do 들어가 [원하는주소]로 상권분석을 해줘..."
```

### 설정 변경 가능 항목

- **주소**: 서울특별시 성동구 왕십리로4가길 9 → 다른 서울시 주소
- **업종**: 외식업 → 외식업, 서비스업, 소매업
- **반경**: 500M → 300M, 500M, 1000M

## 주요 파일

- `상권분석_자동화.py`: 주소 입력받아 자동으로 bat 파일 및 md 파일 업데이트
- `gemini1.bat`: 상권분석 자동화 실행 배치 파일
- `gemini_간단명확.bat`: 간단한 명령 실행용 배치 파일
- `gemini_JSON추출.bat`: JSON 데이터 추출용 배치 파일
- `gemini_브라우저정리.bat`: 브라우저 정리용 배치 파일

## 기술 스택

- **Playwright MCP**: 웹 브라우저 자동화
- **Gemini CLI**: AI 기반 자동화 명령 실행
- **서울시 골목상권 분석 시스템**: 상권분석 데이터 제공

## 참고사항

- 배치 파일 실행 전 Anaconda 환경이 활성화됩니다
- UTF-8 인코딩(chcp 65001) 사용
- 분석 완료 후 결과를 확인하세요
